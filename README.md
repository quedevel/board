# 무한 스크롤을 이용한 게시판 구현

기존의 페이징 방식이 아닌 페이스북이나 인스타그램과 같은 무한스크롤 방식의 게시판을 구현
JSP를 사용하지 않고 Single page 방식으로 Ajax를 통해 REST작업 방식을 사용. 


-- 작업시 발생하는 오류 Memo
기존의 페이징 방식과 다른점과 발생하는 오류!

-- getList()
1. 기존 페이징 방식의 쿼리를 사용하여도 스크롤로 처리가 되긴하지만 멀티쓰레드 환경이나
   데이터를 가져오는 시간이 늦어질때 문제가 발생.
ex ) 멀티 쓰레드 상황에서 한사람이 글을 썼다면 다른 사람은 다음 페이징 할때 마지막
     게시물이 중복되어 나온다!! 시간이 늦어질때도 마찬가지로 게시물이 중복해서 나온다.
        
-- register(), delete(), search() 
2. 검색 / 등록 / 삭제 등등 CRUD 작업시에 스크롤위치가 항상 중요하다.
   (페이스북이나 인스타그램을 글작성 삭제는 다른 페이지로 넘어감)

Solution >> 1. 기존 페이징 방식처럼 1page, 2page 방식이 아닌 마지막 게시물의 번호(bno)를 받아와서
               다음 번호부터 리스트를 뿌려주도록 SQL을 변경하여 구현.
            2. Single page 방식으로 페이스북과 인스타그램과 같이 다른페이지로 넘어가지 않기 때문에
               각각 작업이 완료시 스크롤 위치를 초기화 시킴.
               
-----------------------------------------------------------------------------------------------

파일 첨부시 발생한 문제점: 네이버 카페나 각종 커뮤니티의 글쓰기 등록 작업시에 이미지 첨부를 사용하여
                          글의 썸네일 적용과 텍스트와 이미지를 함께 이용하여 내용을 꾸밀 수 있음.
                          
Solution >> 이미지 첨부시 해당 이미지 파일로 게시글의 썸네일을 띄워줌.
            이미지 첨부시 textarea에 img태그를 같이 올려줌으로써 텍스트와 함께 내용을 꾸미도록 만듬.
            
Problem >> 이미지 크기가 각각 다르기 때문에 썸네일 띄울때 문제가 생김.
           여러 이미지 동시 첨부시 어떤 이미지를 썸네일로 올릴지 지정할 수 있도록 해야함.
           이미지 첨부 삭제시 textarea의 img태그도 같이 사라져야함.
           
Solution >> 썸네일 파일을 새롭게 만들어줌 게시물 썸네일 크기는 고정하여 중앙 정렬하여 사진을 띄워줌
            썸네일을 지정하여 DB에 올려줄때 썹네일 파일로 지정된것을 represent 컬럼을 추가하여 올려줌
            삭제시 파일이름을 추적하여 같은 img태그도 지워줌

Problem >> getList() 시 모든 첨부 파일을 가져오니 performance가 안나옴. SQL에서 두 테이블을 조인하여
           가져오기 때문에 느림.

Solution >> Attach 테이블에 represent를 -> Board 테이블로 이동시킴. getList() 할때 Board 테이블만
            Hit하여 빠르게 가져올수 있도록 만듬.
           
